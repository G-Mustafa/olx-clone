!function(e){function t(t){for(var n,a,s=t[0],i=t[1],l=0,c=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&c.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(r&&r(t);c.length;)c.shift()()}var n={},o={0:0};function a(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=s);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=function(e){return a.p+""+({}[e]||e)+".bundle.js"}(e);var r=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;r.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",r.name="ChunkLoadError",r.type=a,r.request=s,n[1](r)}o[e]=void 0}};var c=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/frontend/dist/",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var r=i;a(a.s=0)}([function(e,t,n){const o={offset:{suggestions:0,recentSearches:0,search:0},searchQuery:""};class a{constructor(e){this.method="POST",this.mode="cors",this.cache="no-cache",this.credentials="include",this.headers={"Content-Type":"application/json"},this.body=JSON.stringify(e)}}const s={method:"GET",credentials:"include",mode:"cors",cache:"no-cache"};function i(e,t){let n=document.getElementById("msg-box");n.innerHTML="clear"==e?"":`<div class="alert alert-${t}" role="alert">${e}</div>`}async function l(e){try{const{latitude:t,longitude:n}=e.coords,o=(await r(`geocode/v1/json?key=dc6bb74b6b72464d8ad2276b41daec5d&q=${t}%2C%20${n}&pretty=1&no_annotations=1`,void 0,"https://api.opencagedata.com/","Failed to detect location")).results[0].components.country;if(!["Pakistan","India","Bangladesh"].includes(o))throw new Error("Country not supported.Select location.");document.getElementById("location").value=o,u(!0,{types:["suggestions","recentSearches"],offset:0,country:o},"")}catch(e){console.log("d"),i(e.message,"danger")}}async function r(e,t,n="https://localhost:3000/",o="Server encountered an error"){const a=await fetch(n+e,t);if(!a.ok)throw new Error(o);return await a.json()}const c=document.getElementById("location");function d(e,t){const n={string:"",number:0};for(let o=0;o<t.length;o++){const a=typeof e[t[o]];e[t[o]]=n[a]}}async function u(e,t,n){try{const s=await r(n,new a(t));if(e)!function(e){const t={suggestions:"Suggestions",recentSearches:"Recent Searches",search:`Search results for:${o.searchQuery}`};let n="";for(const o in e)n+=`<div class="row">\n    <h2 class="heading">${t[o]}</h2>\n    <div id="${o}" class="row">`+m(e[o],o)+`</div></div>\n    <button id="${o}Btn" ${e[o].length<10?"disabled":""} name="${o}" type="button" class="btn btn-outline-primary load-more">\n    Load More</button>`;document.getElementById("app").innerHTML=n}(s);else{!function(e,t){t.length<10&&(document.getElementById(e+"Btn").disabled=!0);t.length&&document.getElementById(e).insertAdjacentHTML("beforeend",m(t,e))}(...Object.entries(s)[0])}}catch(e){console.log("f"),i(e.message,"danger")}}function m(e,t){let n="";o.offset[t]+=10;for(let t=0;t<e.length;t++)n+=`<div class="card col-sm-6 col-md-4 col-lg-3 m-2"><img class="card-img-top ad-img" src="https://localhost:3000/static/ads/${e[t].ad_id}" alt="Card image cap"><div class="card-body"><h5 class="card-title">${e[t].title}</h5><button name="${e[t].ad_id}" class="btn btn-primary card-btn">more info</button></div></div>`;return n}async function g({id:e,token:t}){const{default:o}=await Promise.all([n.e(1),n.e(2)]).then(n.t.bind(null,1,7)),a=o("https://localhost:3000",{query:{id:e,token:t}}),l=document.getElementById("header-list");l.innerHTML=`<li class="nav-item"><button name="Chat" class="btn btn-outline-success m-2">Chat</button></li><li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown"><img src="https://localhost:3000/static/profiles/${e}" width="40" height="40" class="rounded-circle"></a><div class="dropdown-menu dropdown-menu-right"><a name="Settings" href="#" class="dropdown-item">Settings</a><div class="dropdown-divider"></div><a name="Logout" href="#" class="dropdown-item">Logout</a></div></li>`,l.onclick=async function(e){const t=e.target.name;if("Chat"===t){document.getElementById("app").innerHTML='<ul id="messages"></ul>\n      <form id="chatForm">\n        <input name="msg" id="msg" autocomplete="off" /><input type="submit" value="submit">\n      </form>';const e=document.getElementById("chatForm");e.onsubmit=function(t){t.preventDefault();const n=e.msg.value;n&&(a.emit("chat message",n,"abc"),e.msg.value="")}}else if("Logout"===t)try{await r("users/logout",s),l.onclick=null,a.disconnect(),p()}catch(e){console.log("a"),i(e.message,"danger")}}}function p(){document.getElementById("header-list").innerHTML='<li class="nav-item"><button name="Login" class="btn btn-outline-primary m-2" data-toggle="modal" data-target="#Modal">Login</button></li><li class="nav-item"><button name="Signup" class="btn btn-outline-primary m-2" data-toggle="modal" data-target="#Modal">Signup</button></li><div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="ModalLabel"></h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></div></div></div></div>',$("#Modal").on("show.bs.modal",(function(t){const n=t.relatedTarget.name;document.getElementById("ModalLabel").textContent=n,"Login"===n?e.innerHTML='<button name="loginFacebook" type="button" class="btn btn-outline-primary modal-btn">Login with Facebook</button><button name="loginGoogle" type="button" class="btn btn-outline-danger modal-btn">Login with Google</button><button name="loginEmail" type="button" class="btn btn-outline-success modal-btn">Login with Email</button>':"Signup"===n&&(e.innerHTML='<form><div class="form-group"><label for="inputEmail">Email address</label><input name="inputEmail" type="email" class="form-control" id="inputEmail" aria-describedby="emailHelp" placeholder="Enter email"><small id="emailHelp" class="form-text text-muted">We\'ll never share your email with anyone else.</small></div><div class="form-group"><label for="inputPassword">Password</label><input name="inputPaswword" type="password" class="form-control" id="inputPassword" placeholder="Password"></div><div class="form-group"><label for="inputFullName">Full name</label><input name="inputFullName" type="text" class="form-control" id="inputFullName" placeholder="Randy Orton"></div><button data-dismiss="modal" type="button" name="signup" class="btn btn-primary">Sign up</button></form>')}));const e=document.getElementsByClassName("modal-body")[0];e.onclick=async function(t){if("BUTTON"!==t.target.tagName)return;const n=t.target.name;if(["loginFacebook","loginGoogle","loginEmail"].includes(n)){if("loginEmail"===n){const t='<form><div class="form-group"><label for="inputEmail">Email address</label><input name="inputEmail" type="email" class="form-control" id="inputEmail" aria-describedby="emailHelp" placeholder="Enter email"><small id="emailHelp" class="form-text text-muted">We\'ll never share your email with anyone else.</small></div><div class="form-group"><label for="inputPassword">Password</label><input name="inputPassword" type="password" class="form-control" id="inputPassword" placeholder="Password"></div><button data-dismiss="modal" type="button" name="login" class="btn btn-primary">Login</button></form>';e.innerHTML=t}}else try{const e=t.target.parentNode.inputEmail.value,o=t.target.parentNode.inputPassword.value;if(!e||!o)return;if("login"===n){const t=await r("users/login",new a({email:e,password:o}));if(t.err)throw new Error(t.err);g(t)}else if("signup"===n){const n=t.target.parentNode.inputFullName.value;if(!n)return;const s=await r("users/signup",new a({email:e,password:o,fullName:n}));if(s.err)throw new Error(s.err);g(s.id)}}catch(e){console.log("b"),i(e.message,"danger")}}}c.onchange=function(){const e=c.value;"none"!==e&&(i("clear"),d(o.offset,["search","suggestions","recentSearches"]),d(o,["searchQuery"]),u(!0,{types:["suggestions","recentSearches"],offset:0,country:e},""))},function(){const e=document.getElementById("search-form");e.onsubmit=function(t){t.preventDefault();const n=e.search.value;n&&n!==o.searchQuery&&(o.searchQuery=n,d(o.offset,["search"]),u(!0,{searchQuery:n,offset:o.offset.search},"search"))},document.getElementById("app").onclick=async function(e){if("BUTTON"!==e.target.tagName)return;const t=e.target.name;if("suggestions"===t||"recentSearches"===t)u(!1,{types:[t],offset:o.offset[t]},"");else if("search"===t)u(!1,{searchQuery:o.searchQuery,offset:o.offset.search},"search");else try{const{details:n,issuedat:o,fullname:s,user_id:i,price:l}=await r("ad",new a({ad_id:t}));n&&o&&s&&i&&l&&function(e,t,n,o,a,s,i){const l=`<img class='ad-img' src="https://localhost:3000/static/ads/${a}"><div><h3 class='ad-title'>${s}</h3><p>${e}</p></div>`,r=`<div>${i}<br>Issued At: ${t.slice(0,10)}</div><h3>Seller Information</h3><img src='https://localhost:3000/static/profiles/${o}'>${n}`;document.getElementById("app").innerHTML=`<div class="row">\n  <div class="col-sm-12 col-lg-8">${l}</div>\n  <div class="col-sm-12 col-lg-4">${r}</div>\n  </div>`}(n,o,s,i,t,e.target.previousSibling.textContent,l)}catch(e){console.log("c"),i(e.message,"danger")}},async function(){try{const e=await r("users/login",s);null===e.id?p():g(e)}catch(e){console.log("e"),i(e.message,"danger")}}(),navigator.geolocation?navigator.geolocation.getCurrentPosition(l):i("Select location","warning")}()}]);